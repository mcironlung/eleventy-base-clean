---
layout: base.njk
permalink: "/{{ page.fileSlug }}/"
---

<article>

  {% if title %}
    <h1>{{ title }}</h1>
  {% endif %}

  {% if date %}
    <!-- Use the custom date filter from .eleventy.js
    <p>{{ date | date }}</p> -->
  {% endif %}

  <!-- Render content safely so markdown HTML is not escaped -->
  <div class="post-content">
    {{ content | safe }}
  </div>

  <!-- Gallery -->
  {% if gallery %}
  <div class="masonry-gallery">
    {% for entry in gallery %}
      {% if entry.image %}
        {% set imgId = "gallery-img-" ~ loop.index %}
        <div class="masonry-item">
          <!-- Link to the lightbox -->
          <a href="#{{ imgId }}">
            <img src="{{ entry.image }}" alt="{{ title }}">
          </a>
        </div>

        <!-- Lightbox overlay -->
        <div id="{{ imgId }}" class="lightbox">
          <a href="#" class="close"></a>
          <img src="{{ entry.image }}" alt="{{ title }}">
        </div>
      {% endif %}
    {% endfor %}
  </div>
{% endif %}

  <!-- Share Button -->
  <div class="share-container">
    <button class="button" id="shareBtn">Share this post!</button>
    <p class="result" aria-live="polite"></p>
  </div>
  <script src="/js/post-share.js"></script>
</article>